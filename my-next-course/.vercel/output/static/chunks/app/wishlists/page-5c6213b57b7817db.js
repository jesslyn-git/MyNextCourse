(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{44831:(t,e,s)=>{Promise.resolve().then(s.bind(s,13870))},76046:(t,e,s)=>{"use strict";var i=s(66658);s.o(i,"useRouter")&&s.d(e,{useRouter:function(){return i.useRouter}})},13870:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d});var i=s(95155),l=s(12115),o=s(76046),r=s(72110),c=s(87526),n=s.n(c),a=s(5565);function d(){let t=(0,o.useRouter)(),[e,s]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[h,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{u(!!document.cookie.split("; ").find(t=>t.startsWith("access_token=")))},[]),(0,l.useEffect)(()=>{async function t(){try{let t=await fetch("/api/wishlists",{method:"GET",credentials:"include"});if(!t.ok)throw Error("Failed to fetch wishlist");let i=await t.json();console.log("\uD83D\uDE80 ~ fetchWishlist ~ data:",i),s(i.wishlist),console.log("\uD83D\uDE80 ~ fetchWishlist ~ wishlists fetched:",e)}catch(t){console.log("\uD83D\uDE80 ~ fetchWishlist ~ error:",t),r.oR.error("Error loading wishlist")}finally{d(!1)}}h&&t()},[h,e]);let _=async t=>{try{if(console.log("Ada di handle remove"),!(await fetch("/api/wishlists/".concat(t),{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to remove item");r.oR.success("Removed from Wishlist!"),s(e.filter(e=>e.product._id!==t))}catch(t){console.log("\uD83D\uDE80 ~ handleRemove ~ error:",t),r.oR.error("Error removing item")}};return h?c?(0,i.jsx)("p",{className:n().loadingText,children:"Loading wishlist..."}):(0,i.jsxs)("div",{className:n().container,children:[(0,i.jsx)("h1",{className:n().title,children:"Your Wishlists"}),0===e.length?(0,i.jsx)("p",{className:n().loginPrompt,children:"Your wishlist is empty."}):(0,i.jsx)("div",{className:n().wishlistGrid,children:e.map(e=>(0,i.jsxs)("div",{className:n().wishlistCard,children:[(0,i.jsx)(a.default,{src:e.product.thumbnail,alt:e.product.title,width:200,height:200}),(0,i.jsxs)("div",{className:n().cardContent,children:[(0,i.jsx)("h3",{className:n().cardTitle,children:e.product.title}),(0,i.jsxs)("div",{className:n().buttonGroup,children:[(0,i.jsx)("button",{className:n().removeButton,onClick:()=>_(e.product._id),children:"âŒ Remove"}),(0,i.jsx)("button",{className:n().viewButton,onClick:()=>t.push("/products/".concat(e.product.slug)),children:"View Product"})]})]})]},e.product._id))})]}):(0,i.jsx)("p",{className:n().loginPrompt,children:"Please login to view your wishlist."})}},87526:t=>{t.exports={container:"styles_container__1n7UK",title:"styles_title__HcY_E",wishlistGrid:"styles_wishlistGrid___8zVY",wishlistCard:"styles_wishlistCard__qQXik",cardContent:"styles_cardContent__FmPD9",cardTitle:"styles_cardTitle___F3C2",buttonGroup:"styles_buttonGroup__LHRVv",removeButton:"styles_removeButton__gbnl1",viewButton:"styles_viewButton__jmaSy",loadingText:"styles_loadingText__4Z_F4",loginPrompt:"styles_loginPrompt__snnaz"}}},t=>{var e=e=>t(t.s=e);t.O(0,[813,565,110,441,517,358],()=>e(44831)),_N_E=t.O()}]);